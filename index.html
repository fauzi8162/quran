<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>quran api by riozi_25</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
      }

      header {
        background-color: #333;
        color: #fff;
        padding: 10px;
        text-align: center;
      }

      .container {
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
        background-color: #fff;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 5px;
      }

      button {
        display: block;
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      audio {
        width: 100%;
        margin-top: 20px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }

      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
      }

      th {
        background-color: #f2f2f2;
      }

      /* Tambahkan styling untuk rata tengah pada kolom Nomor */
      td.nomor {
        text-align: center;
      }

      td.arab {
        font-size: 40px;
      }

      footer {
        margin-top: 20px;
        text-align: center;
        padding: 10px;
        background-color: #f2f2f2;
      }

      /* Menambahkan gaya untuk tautan */
      footer a {
        color: inherit;
        /* Pewarisan warna teks dari elemen induk */
        text-decoration: none;
        /* Menghilangkan dekorasi tautan (seperti garis bawah) */
        cursor: pointer;
        /* Menunjukkan kursor pointer ketika diarahkan ke tautan */
      }

      /* Gaya untuk mengubah tampilan tautan saat dihover (opsional) */
      footer a:hover {
        opacity: 0.8;
        /* Mengurangi kecerahan tautan saat dihover */
      }
    </style>
  </head>
  <body>
    <!-- <script src="../lib/sweetalert.min.js"></script> -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <header>
      <h1>quran api</h1>
    </header>
    <div class="container">
      <button id="btnCari">Cari Surah</button>
      <div id="infoSurah" align="center"></div>
      <audio id="audioPlayer" controls>
        <source src="" type="audio/mp3"> Your browser does not support the audio element.
      </audio>
      <div id="infoAyat" align="center" style="display: none;">
        <table>
          <thead>
            <tr>
              <th>Nomor</th>
              <th>Ayat</th>
            </tr>
          </thead>
          <tbody id="dataBody"></tbody>
        </table>
      </div>
    </div>
    <script>
      var btnCari = document.getElementById('btnCari');
      var infoAyat = document.getElementById('infoAyat');
      var nomorCell = document.getElementById('nomor');
      var arabCell = document.getElementById('arab');
      var terjemahanCell = document.getElementById('terjemahan');
      var indonesiaCell = document.getElementById('indonesia');
      btnCari.addEventListener('click', function() {
        showAlert();
      });

      function showAlert() {
        swal({
          text: 'Search for a surah. e.g. "Al Fatihah". atau tuliskan nomor surah',
          content: "input",
          button: {
            text: "Search!",
            closeModal: false,
          },
        }).then(surahName => {
          if (!surahName) throw null;
          cariSurahIni = surahName;
          return fetch('https://al-quran-8d642.firebaseio.com/data.json?print=pretty');
        }).then(response => response.json()).then(data => {
          var surahName = cariSurahIni;
          var surah;
          if (isNaN(surahName)) surah = findSurahByName(data, surahName);
          else surah = findSurahByNomor(data, surahName);
          if (!surah) {
            return swal("No surah was found!");
          }
          console.log(surah);
          playAudio(surah.audio);
          // Menyisipkan HTML
          const wrapper = document.createElement('div');
          wrapper.innerHTML = surah.keterangan;
          showInfoSurah(surah);
          swal({
            title: "Surah Information:",
            text: `${surah.nama} | ${surah.asma} | arti : ${surah.arti} | surah ke : ${surah.nomor} | jumlah ayat : ${surah.ayat}`,
            icon: "success",
            content: wrapper,
            buttons: false, // Menghilangkan tombol OK jika tidak diperlukan
          });
        }).catch(err => {
          if (err) {
            swal("Oh noes!", "The AJAX request failed!", "error");
          } else {
            swal.stopLoading();
            swal.close();
          }
        });
      }
      var cariSurahIni;
      var infoSurah = "";

      function findSurahByName(data, name) {
        // Logic to find and return the surah by name
        const surahList = Object.values(data);
        const lowerCaseName = name.toLowerCase();
        return surahList.find(surah => surah.nama.toLowerCase().includes(lowerCaseName));
      }

      function findSurahByNomor(data, nomor) {
        // Logic to find and return the surah by name
        const surahList = Object.values(data);
        return surahList.find(surah => surah.nomor == nomor);
      }

      function playAudio(url) {
        var audio = document.getElementById('audioPlayer');
        audio.src = url; // Ganti URL_AUDIO_FILE dengan URL file audio Anda
        audio.controls = true; // Menampilkan kontrol pemutar audio
        audio.autoplay = true; // Otomatis memulai pemutaran audio
      }

      function showInfoSurah(surah) {
        var infoSurah = `${surah.nama} | ${surah.asma} | arti : ${surah.arti} | surah ke : ${surah.nomor}`;
        var divInfo = document.getElementById('infoSurah');
        divInfo.innerHTML = infoSurah;
        getSurah(surah.nomor);
      }

      function getSurah(index) {
        var dataBody = document.getElementById('dataBody');
        var getUrl = "https://al-quran-8d642.firebaseio.com/surat/" + index + ".json?print=pretty"
        fetch(getUrl).then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json();
        }).then(data => {
          console.log(data);
          // Tampilkan data dalam tabel
          /*data.forEach(function (item) {
        var row = document.createElement('tr');
        row.innerHTML = `
						
						<td>${item.nomor}</td>
						<td>${item.ar}</td>
						<td>${item.tr}</td>
						<td>${item.id}</td>`;
        dataBody.appendChild(row);
      });
	  */
          /* data.forEach(function (item) {
        var row = document.createElement('tr');
        row.innerHTML = `
						
						<td>${item.nomor}</td>
						<td>${item.ar}</td>`;
        nomorCell.innerHTML = item.nomor;
        arabCell.innerHTML = item.ar;
        terjemahanCell.innerHTML = item.tr;
        indonesiaCell.innerHTML = item.id;
      });
	  */
          data.forEach(function(item) {
            var row = document.createElement('tr');
            var nomorCell = document.createElement('td');
            var arabCell = document.createElement('td');
            var terjemahanCell = document.createElement('td');
            var indonesiaCell = document.createElement('td');
            nomorCell.setAttribute('rowspan', '3');
            nomorCell.innerHTML = item.nomor
            arabCell.innerHTML = item.ar;
            terjemahanCell.innerHTML = item.tr;
            indonesiaCell.innerHTML = item.id;
            nomorCell.className = "nomor"; // Tambahkan class untuk styling
            arabCell.className = "arab"; // Tambahkan class untuk styling
            row.appendChild(nomorCell);
            row.appendChild(arabCell);
            var rowTerjemahan = document.createElement('tr');
            rowTerjemahan.appendChild(terjemahanCell);
            var rowIndonesia = document.createElement('tr');
            rowIndonesia.appendChild(indonesiaCell);
            dataBody.appendChild(row);
            dataBody.appendChild(rowTerjemahan);
            dataBody.appendChild(rowIndonesia);
          });
          infoAyat.style.display = 'block';
        }).catch(error => {
          console.error('There was a problem with the fetch operation:', error);
        });
      }
    </script>
    <footer>
      <p>by <a href="https://instagram.com/riozi_25" target="_blank">riozi_25</a>
      </p>
    </footer>
  </body>
</html>